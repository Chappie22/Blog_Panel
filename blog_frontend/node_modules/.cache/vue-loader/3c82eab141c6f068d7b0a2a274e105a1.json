{"remainingRequest":"C:\\Users\\Админ\\Desktop\\blog_frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Админ\\Desktop\\blog_frontend\\src\\components\\post.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Админ\\Desktop\\blog_frontend\\src\\components\\post.vue","mtime":1622228332147},{"path":"C:\\Users\\Админ\\Desktop\\blog_frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Админ\\Desktop\\blog_frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Админ\\Desktop\\blog_frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Админ\\Desktop\\blog_frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyIKLy8gaW1wb3J0IHJvdXRlciBmcm9tICJAL3JvdXRlciI7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAicG9zdCIsCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHBvc3Q6IG51bGwsCiAgICAgICAgICAgIGJsb2c6IG51bGwsCiAgICAgICAgICAgIGNvbW1lbnRzOiBudWxsCiAgICAgICAgfQogICAgfSwKCiAgICBtZXRob2RzOiB7CiAgICAgICAgY2xlYXJGb3JtOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ1c2VybmFtZSIpLnZhbHVlID0gJyc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtYWluVGV4dCIpLnZhbHVlID0gJyc7CiAgICAgICAgfSwKICAgICAgICBhZGRDb21tZW50OiBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICBheGlvcwogICAgICAgICAgICAgICAgLnBvc3QoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9jb21tZW50P3Bvc3RJZD0iICsgIHRoaXMuJHN0b3JlLmdldHRlcnMucG9zdElkICsgIiZibG9nSWQ9IiArIHRoaXMuJHN0b3JlLmdldHRlcnMuYmxvZ0lkLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidXNlcm5hbWUiKS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtYWluVGV4dCIpLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogbmV3IERhdGUoRGF0ZS5ub3coKSkudG9EYXRlU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLnRva2VuCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjaGFuZ2VDb21tZW50SWQnLCByZXNwb25zZS5kYXRhLnBvc3RzLmZpbmQocCA9PiBwLl9pZCA9PT0gdGhpcy4kc3RvcmUuZ2V0dGVycy5wb3N0SWQpLmNvbW1lbnRzW3Jlc3BvbnNlLmRhdGEucG9zdHMuZmluZChwID0+IHAuX2lkID09PSB0aGlzLiRzdG9yZS5nZXR0ZXJzLnBvc3RJZCkuY29tbWVudHMubGVuZ3RoLTFdLl9pZCk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHRoaXMuY29tbWVudHMucHVzaCh7CiAgICAgICAgICAgICAgICBfaWQ6IHRoaXMuJHN0b3JlLmdldHRlcnMuY29tbWVudElkLAogICAgICAgICAgICAgICAgdXNlcm5hbWU6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ1c2VybmFtZSIpLnZhbHVlLAogICAgICAgICAgICAgICAgdGV4dDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1haW5UZXh0IikudmFsdWUsCiAgICAgICAgICAgICAgICBkYXRlOiBuZXcgRGF0ZShEYXRlLm5vdygpKS50b0RhdGVTdHJpbmcoKQogICAgICAgICAgICB9KTsKCiAgICAgICAgfSwKICAgICAgICBkZWxldGVDb21tZW50OiBmdW5jdGlvbiAoaWQpIHsKICAgICAgICAgICAgYXhpb3MKICAgICAgICAgICAgICAgIC5kZWxldGUoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9jb21tZW50P3Bvc3RJZD0nICsgdGhpcy4kc3RvcmUuZ2V0dGVycy5wb3N0SWQgKyAiJmJsb2dJZD0iICsgdGhpcy4kc3RvcmUuZ2V0dGVycy5ibG9nSWQgKyAiJmNvbW1lbnRJZD0iICsgaWQsIHsKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICJBdXRob3JpemF0aW9uIjogdGhpcy4kc3RvcmUuZ2V0dGVycy50b2tlbgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICAgIGF4aW9zCiAgICAgICAgICAgIC5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9ibG9nP2Jsb2dJZD0nICsgdGhpcy4kc3RvcmUuZ2V0dGVycy5ibG9nSWQsIHsKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAiQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luIjogIioiLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmJsb2cgPSByZXNwb25zZS5kYXRhWzBdOwogICAgICAgICAgICAgICAgdGhpcy5wb3N0ID0gdGhpcy5ibG9nLnBvc3RzLmZpbmQocCA9PiBwLl9pZCA9PT0gdGhpcy4kc3RvcmUuZ2V0dGVycy5wb3N0SWQpOwogICAgICAgICAgICAgICAgdGhpcy5jb21tZW50cyA9IHRoaXMucG9zdC5jb21tZW50czsKICAgICAgICAgICAgfSk7CiAgICB9Cn0K"},{"version":3,"sources":["post.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"post.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div>\r\n        <article id=\"scroll-less\">\r\n            <header>\r\n                <h1>{{post.title}}</h1>\r\n                <h3>{{post.subtitle}}</h3>\r\n            </header>\r\n            <section>\r\n                <p id=\"main-text\" v-html=\"post.mainText\" v-if=\"post != null\"></p>\r\n            </section>\r\n\r\n            <footer class=\"comments-wrapper\" id=\"comments\">\r\n                <h2>\r\n                    <span v-if=\"post.comments.length === 0\">Be the first to comment!</span>\r\n                    <span v-else-if=\"post.comments.length !== 1\">{{post.comments.length}}  Comments</span>\r\n                    <span v-else>{{post.comments.length}}  Comment</span>\r\n                    <a href=\"#comments-form\" v-scroll-to=\"'#comments-form'\" v-show=\"'#comments-form'\">Write a\r\n                        Comment</a>\r\n                </h2>\r\n\r\n                <transition-group class=\"comments\" name=\"fade-up\" tag=\"ul\">\r\n                    <li v-bind:id=\"index\" v-bind:key=\"comment\" v-for=\"(comment, index) in comments\">\r\n                        <div class=\"comment-author-meta\">\r\n                            <div class=\"avatar\">\r\n                                <img src=\"http://orig07.deviantart.net/4bc8/f/2013/240/2/2/free_avatar_aang_icon_by_zutarart-d6k31hx.gif\"\r\n                                     v-bind:alt=\"comment.user\"/>\r\n                            </div>\r\n                            <div class=\"user\">{{comment.username}}</div>\r\n                            <div class=\"delete-comment\" title=\"Delete Comment\"\r\n                                 v-if=\"$store.getters.profileId === blog.userId\" v-on:click=\"deleteComment(comment._id); comments.splice(index, 1)\">\r\n                                &times;\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"comment-text\">\r\n                            <p style=\"white-space: pre-line\" v-html=\"comment.text\"></p>\r\n                        </div>\r\n                        <div class=\"comment-meta\">\r\n                            <span class=\"comment-date\">Posted at: {{comment.date}}</span>\r\n                        </div>\r\n                    </li>\r\n                </transition-group>\r\n\r\n                <div class=\"comments-form\" id=\"comments-form\">\r\n                    <h2>Leave a Comment</h2>\r\n                    <form v-on:submit.prevent=\"addComment\">\r\n                        <div class=\"field-wrapper\">\r\n                            <label><span>Name yourself (public)</span><span v-if=\"$store.getters.profileId.length < 1\" style=\"margin-left: 5px; color: #239ed0\">You need te login/register first!</span></label>\r\n                            <input name=\"user\" type=\"text\" id=\"username\" :value=\"$store.getters.username\" :disabled=\"$store.getters.profileId.length < 1\"/>\r\n                        </div>\r\n\r\n                        <div class=\"field-wrapper\">\r\n                            <label>Comment (also public)<span v-if=\"$store.getters.profileId.length < 1\" style=\"margin-left: 5px; color: #239ed0\">You need te login/register first!</span></label>\r\n                            <textarea cols=\"50\" id=\"mainText\" required rows=\"8\" style=\"resize: none\" name=\"comment-text\" :disabled=\"$store.getters.profileId.length < 1\"></textarea>\r\n                        </div>\r\n\r\n                        <div class=\"field-wrapper\">\r\n                            <input class=\"btn\" type=\"submit\" value=\"Add Comment\" :disabled=\"$store.getters.profileId.length < 1\"/>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n\r\n            </footer>\r\n        </article>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import axios from \"axios\"\r\n    // import router from \"@/router\";\r\n\r\n    export default {\r\n        name: \"post\",\r\n        data() {\r\n            return {\r\n                post: null,\r\n                blog: null,\r\n                comments: null\r\n            }\r\n        },\r\n\r\n        methods: {\r\n            clearForm: function () {\r\n                document.getElementById(\"username\").value = '';\r\n                document.getElementById(\"mainText\").value = '';\r\n            },\r\n            addComment: function () {\r\n\r\n                axios\r\n                    .post(\"http://localhost:3000/comment?postId=\" +  this.$store.getters.postId + \"&blogId=\" + this.$store.getters.blogId, {\r\n                            data: {\r\n                                username: document.getElementById(\"username\").value,\r\n                                text: document.getElementById(\"mainText\").value,\r\n                                date: new Date(Date.now()).toDateString()\r\n                            }\r\n                        }, {\r\n                            headers: {\r\n                                'Authorization': this.$store.getters.token\r\n                            }\r\n                        }\r\n                    )\r\n                    .then(response => {\r\n                        this.$store.commit('changeCommentId', response.data.posts.find(p => p._id === this.$store.getters.postId).comments[response.data.posts.find(p => p._id === this.$store.getters.postId).comments.length-1]._id);\r\n                    });\r\n\r\n                this.comments.push({\r\n                    _id: this.$store.getters.commentId,\r\n                    username: document.getElementById(\"username\").value,\r\n                    text: document.getElementById(\"mainText\").value,\r\n                    date: new Date(Date.now()).toDateString()\r\n                });\r\n\r\n            },\r\n            deleteComment: function (id) {\r\n                axios\r\n                    .delete('http://localhost:3000/comment?postId=' + this.$store.getters.postId + \"&blogId=\" + this.$store.getters.blogId + \"&commentId=\" + id, {\r\n                        headers: {\r\n                            \"Authorization\": this.$store.getters.token\r\n                        }\r\n                    });\r\n            }\r\n        },\r\n        mounted() {\r\n            axios\r\n                .get('http://localhost:3000/blog?blogId=' + this.$store.getters.blogId, {\r\n                    headers: {\r\n                        \"Access-Control-Allow-Origin\": \"*\",\r\n                    }\r\n                })\r\n                .then(response => {\r\n                    this.blog = response.data[0];\r\n                    this.post = this.blog.posts.find(p => p._id === this.$store.getters.postId);\r\n                    this.comments = this.post.comments;\r\n                });\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n    #scroll-less {\r\n        max-height: 80vh;\r\n        overflow-y: scroll;\r\n    }\r\n\r\n    ::-webkit-scrollbar {\r\n        width: 20px;\r\n    }\r\n\r\n    /* Track */\r\n    ::-webkit-scrollbar-track {\r\n        box-shadow: inset 0 0 10px rgba(128, 128, 128, 0);\r\n        border-radius: 10px;\r\n    }\r\n\r\n    /* Handle */\r\n    ::-webkit-scrollbar-thumb {\r\n        background: rgba(153, 153, 153, 0);\r\n        border-radius: 10px;\r\n    }\r\n\r\n    /* Handle on hover */\r\n    ::-webkit-scrollbar-thumb:hover {\r\n        background: #447587;\r\n    }\r\n\r\n    body {\r\n        color: #666;\r\n    }\r\n\r\n    article {\r\n        max-width: 600px;\r\n        margin: 60px auto;\r\n        padding: 16px;\r\n    }\r\n\r\n    h1 {\r\n        font-size: 36px;\r\n        letter-spacing: 1px;\r\n        text-transform: uppercase;\r\n        margin-bottom: 32px;\r\n    }\r\n\r\n    p {\r\n        font-size: 18px;\r\n        line-height: 1.8;\r\n        margin-bottom: 32px;\r\n    }\r\n\r\n    a {\r\n        color: #50c6d8;\r\n        text-decoration: none;\r\n        border-bottom: 1px solid transparent;\r\n        transition: all 0.3s ease-in-out;\r\n    }\r\n\r\n    a:hover {\r\n        border-bottom: 1px solid skyblue;\r\n    }\r\n\r\n    .comments-wrapper {\r\n        border-top: 1px solid #eee;\r\n        padding-top: 32px;\r\n    }\r\n\r\n    .comments-wrapper h2 a {\r\n        text-decoration: none;\r\n        font-size: 14px;\r\n        float: right;\r\n        font-weight: 400;\r\n    }\r\n\r\n    /** COMMENTS FORM **/\r\n    .comments-form .field-wrapper {\r\n        margin-bottom: 16px;\r\n    }\r\n\r\n    .comments-form label {\r\n        display: inline-block;\r\n        font-size: 12px;\r\n        color: #999;\r\n        text-transform: uppercase;\r\n        padding-left: 5px;\r\n    }\r\n\r\n    .comments-form input[type=\"text\"], .comments-form textarea {\r\n        box-sizing: border-box;\r\n        background-color: #eee;\r\n        border: 1px solid #ccc;\r\n        border-radius: 3px;\r\n        float: none;\r\n        display: block;\r\n        clear: both;\r\n        outline: none;\r\n        padding: 8px;\r\n        width: 100%;\r\n        transition: all 0.3s ease-in-out;\r\n    }\r\n\r\n    .comments-form input[type=\"text\"]:focus, .comments-form textarea:focus {\r\n        background-color: #fbfbfb;\r\n    }\r\n\r\n    .comments-form input[type=\"text\"] {\r\n        height: 35px;\r\n        line-height: 40px;\r\n    }\r\n\r\n    .comments-form textarea {\r\n        height: 150px;\r\n    }\r\n\r\n    .btn {\r\n        background-color: #50c6d8;\r\n        border: 1px solid #50c6d8;\r\n        border-radius: 3px;\r\n        box-shadow: none;\r\n        outline: none;\r\n        color: #fff;\r\n        cursor: pointer;\r\n        line-height: 1;\r\n        padding: 12px 24px 10px;\r\n        text-transform: uppercase;\r\n        letter-spacing: 1px;\r\n        transition: all 0.3s ease-in-out;\r\n    }\r\n\r\n    .btn:hover, .btn:focus {\r\n        background-color: #5bbce4;\r\n        border: 1px solid #239ed0;\r\n    }\r\n\r\n    /** COMMENTS **/\r\n    .comments {\r\n        list-style-type: none;\r\n        overflow: hidden;\r\n        margin: 32px auto;\r\n        padding: 0;\r\n    }\r\n\r\n    .comments * {\r\n        box-sizing: border-box;\r\n    }\r\n\r\n    .comments li {\r\n        overflow: hidden;\r\n        border-radius: 5px;\r\n        margin-bottom: 16px;\r\n    }\r\n\r\n    .comment-author-meta {\r\n        display: block;\r\n        float: none;\r\n        clear: both;\r\n        padding: 10px 16px;\r\n        background-color: #ebebeb;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .comment-author-meta .avatar {\r\n        width: 40px;\r\n        height: 40px;\r\n        background-color: skyblue;\r\n        padding: 3px;\r\n        border-radius: 100%;\r\n        float: left;\r\n    }\r\n\r\n    .comment-author-meta .avatar img {\r\n        width: 100%;\r\n    }\r\n\r\n    .comment-author-meta .user {\r\n        float: left;\r\n        height: 40px;\r\n        padding: 13px;\r\n    }\r\n\r\n    .comment-author-meta .delete-comment {\r\n        color: red;\r\n        cursor: pointer;\r\n        float: right;\r\n        font-size: 120%;\r\n    }\r\n\r\n    .comment-meta {\r\n        background-color: #eee;\r\n        padding: 5px 16px;\r\n        font-size: 12px;\r\n        color: #888;\r\n    }\r\n\r\n    .comment-meta span:first-child {\r\n        padding-right: 8px;\r\n        margin-right: 8px;\r\n        border-right: 1px solid #888;\r\n    }\r\n\r\n    .comment-meta a {\r\n        float: right;\r\n        color: #5bbce4;\r\n    }\r\n\r\n    .comment-text {\r\n        float: none;\r\n        clear: both;\r\n        padding: 0 16px 16px;\r\n        border: 1px solid #eee;\r\n        background-color: #fbfbfb;\r\n    }\r\n\r\n    /* VUE.JS Transitions */\r\n    .fade-up-enter-active, .fade-up-leave-to {\r\n        transition: all 0.3s ease-in-out;\r\n        opacity: 0.75;\r\n    }\r\n\r\n    .fade-up-enter, .fade-up-leave-to {\r\n        opacity: 0;\r\n        transform: translateY(-32px);\r\n    }\r\n</style>"]}]}